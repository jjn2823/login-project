<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>نموذج تدريبي — اختبار تمييز المواقع المزيفة</title>
<style>
  :root{--bg:#f3f4f6;--card:#fff;--accent:#1a73e8;--warn:#d93025;--muted:#6b7280}
  body{font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
  .frame{width:100%;max-width:520px}
  .banner{background:#111827;color:#fff;padding:12px;border-radius:8px 8px 6px 6px;margin-bottom:14px;box-shadow:0 6px 18px rgba(2,6,23,.08)}
  .banner strong{display:block;font-size:16px}
  .banner p{margin:6px 0 0;color:#cbd5e1;font-size:13px}
  .card{background:var(--card);border-radius:10px;padding:30px;box-shadow:0 8px 30px rgba(2,6,23,.06)}
  h1{margin:0 0 8px;font-weight:600;font-size:20px;color:#0f172a;text-align:center}
  .subtitle{color:var(--muted);text-align:center;margin-bottom:18px}
  .step{display:none}
  .step.active{display:block}
  .input{width:100%;padding:12px;border-radius:8px;border:1px solid #e6e9ee;font-size:15px;box-sizing:border-box}
  .row{margin-bottom:14px}
  .buttons{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-top:6px}
  .btn{background:var(--accent);color:#fff;padding:10px 16px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn.secondary{background:#eef2ff;color:#0f172a;border:1px solid #e6e9ee}
  .note{font-size:13px;color:var(--muted);margin-top:12px;text-align:center}
  .footer{font-size:12px;color:var(--muted);text-align:center;margin-top:18px}
  .result{background:#f8fafc;border-radius:8px;padding:12px;margin-top:12px;font-size:13px;color:#0f172a}
  .danger{color:var(--warn);font-weight:700}
  .muted-block{font-size:13px;color:var(--muted);padding:10px;border-radius:8px;background:#fbfdff;margin-top:10px}
</style>
</head>
<body>
  <div class="frame" role="main">
    <div class="banner" aria-live="polite">
      <strong>تنبيه — تجربة تعليمية</strong>
      <p>هذه صفحة تدريبية لتمييز المواقع المزيفة. لا تدخل أي بيانات حقيقية هنا. كل شيء يبقى محليًا في متصفحك فقط.</p>
    </div>

    <div class="card" aria-labelledby="title">
      <h1 id="title">تسجيل الدخول — منصة تدريبية</h1>
      <div class="subtitle">اختبار عملي لتمييز صفحات تسجيل الدخول</div>

      <!-- STEP 1: Email -->
      <div id="step-email" class="step active" aria-hidden="false">
        <div class="row">
          <input id="email" class="input" type="email" placeholder="البريد الإلكتروني أو رقم الهاتف" autocomplete="off" />
          <div id="email-err" class="muted-block" style="display:none;color:#d9534f">الرجاء إدخال بريد إلكتروني صالح.</div>
        </div>
        <div class="buttons">
          <button class="btn secondary" id="demo-hint">كيف تميّز موقع مزيف؟</button>
          <button class="btn" id="next-to-password">التالي</button>
        </div>
        <div class="note">ملاحظة: هذا نموذج تعليمي — لا يتم إرسال أي شيء خارج جهازك</div>
      </div>

      <!-- STEP 2: Password -->
      <div id="step-password" class="step" aria-hidden="true">
        <div class="row user-info" style="display:flex;align-items:center;gap:10px">
          <div style="width:44px;height:44px;border-radius:10px;background:#e7eefc;color:#0f172a;display:flex;align-items:center;justify-content:center;font-weight:700" id="avatar">م</div>
          <div>
            <div id="display-email" style="font-weight:600"></div>
            <div style="font-size:13px;color:var(--muted)">حسابك التجريبي</div>
          </div>
        </div>

        <div class="row password-container" style="position:relative">
          <input id="password" class="input" type="password" placeholder="أدخل كلمة المرور" autocomplete="off" />
        </div>
        <div id="pw-err" class="muted-block" style="display:none;color:#d9534f">الرجاء إدخال كلمة مرور.</div>

        <div class="buttons">
          <button class="btn secondary" id="back-email">استخدام بريد آخر</button>
          <button class="btn" id="submit-btn">تسجيل الدخول</button>
        </div>

        <div class="result" id="local-result" style="display:none"></div>
      </div>

      <div class="footer">
        <div>لأغراض تعليمية فقط — الجهة المالكة: قسم أمن المعلومات (تجريبي)</div>
      </div>
    </div>
  </div>

<script>
/*
  صفحة تعليمية آمنة: لا ترسل أي بيانات إلى خوادم خارجية.
  - تحفظ فقط نسخة مشفّرة محليًا (localStorage) كتوضيح للمدرّس.
  - تعرض تقييمًا تعليميًا فور الضغط.
*/

function validateEmail(email){
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(String(email).toLowerCase());
}

const stepEmail = document.getElementById('step-email');
const stepPassword = document.getElementById('step-password');
const nextBtn = document.getElementById('next-to-password');
const backBtn = document.getElementById('back-email');
const demoHint = document.getElementById('demo-hint');
const submitBtn = document.getElementById('submit-btn');
const emailInput = document.getElementById('email');
const pwInput = document.getElementById('password');
const emailErr = document.getElementById('email-err');
const pwErr = document.getElementById('pw-err');
const resultBox = document.getElementById('local-result');
const displayEmail = document.getElementById('display-email');
const avatar = document.getElementById('avatar');

// STEP: go to password
nextBtn.addEventListener('click', () => {
  const val = emailInput.value.trim();
  if(!validateEmail(val)){
    emailErr.style.display = 'block';
    emailInput.classList.add('error');
    return;
  }
  emailErr.style.display = 'none';
  emailInput.classList.remove('error');
  // show password step
  displayEmail.textContent = val;
  avatar.textContent = val.charAt(0).toUpperCase();
  stepEmail.classList.remove('active');
  stepEmail.setAttribute('aria-hidden','true');
  stepPassword.classList.add('active');
  stepPassword.setAttribute('aria-hidden','false');
  pwInput.focus();
});

// Back to email
backBtn.addEventListener('click', () => {
  stepPassword.classList.remove('active');
  stepPassword.setAttribute('aria-hidden','true');
  stepEmail.classList.add('active');
  stepEmail.setAttribute('aria-hidden','false');
  emailInput.focus();
});

// Demo hint shows educational checklist
demoHint.addEventListener('click', () => {
  alert(
    "قائمة فحص سريعة:\n" +
    "• هل عنوان الموقع يحتوي دومين غريب؟\n" +
    "• هل الصفحة تطلب بيانات غير ضرورية؟\n" +
    "• هل توجد أخطاء لغوية أو تصميمية؟\n" +
    "• هل الشعار والروابط تشير لمصدر رسمي؟\n\n" +
    "هذا اختبار تعليمي — لا تدخل بيانات حقيقية."
  );
});

// Submit (educational)
submitBtn.addEventListener('click', () => {
  const pw = pwInput.value.trim();
  if(pw === ""){
    pwErr.style.display = 'block';
    pwInput.classList.add('error');
    return;
  }
  pwErr.style.display = 'none';
  pwInput.classList.remove('error');

  // تحضير مُخرَج تعليمي: لا نرسل أي شيء للخارج
  const email = emailInput.value.trim();
  const ts = new Date().toISOString();

  // نُخزّن محليًا رمزًا مختصرًا وليس الباسوورد الكامل (hash بسيط للتوضيح — ليس تشفيرًا حقيقيًا)
  // ملاحظة: هذا بغرض تعليمي فقط — لا تستخدمه لتخزين بيانات حساسة.
  function simpleHash(s){
    // تجزئة بسيطة وغير آمنة لغرض العرض فقط
    let h = 0;
    for(let i=0;i<s.length;i++){ h = (h<<5) - h + s.charCodeAt(i); h |= 0; }
    return Math.abs(h).toString(36);
  }

  const record = {
    time: ts,
    email: email,
    password_hash: simpleHash(pw).slice(0,10) // قصّنا جزء لتوضيح أننا لا نخزن الباسوورد
  };

  // نحفظ محليًا في localStorage تحت مفتاح تجريبي
  const logKey = 'edu_phish_log_v1';
  const prev = JSON.parse(localStorage.getItem(logKey) || '[]');
  prev.push(record);
  localStorage.setItem(logKey, JSON.stringify(prev));

  // عرض تقرير تعليمي مختصر للطالب
  resultBox.style.display = 'block';
  resultBox.innerHTML =
    "<strong>نتيجة الاختبار (تعليمي)</strong><br>" +
    "• التوقيت: " + record.time + "<br>" +
    "• البريد الذي أدخلته: " + record.email + "<br>" +
    "• (تخزين محلي فقط) تم تسجيل سجل رقمي مختصر: <code>" + record.password_hash + "</code><br><br>" +
    "<span class='danger'>تحذير:</span> هذه الصفحة تجريبية — لا تدخل بيانات حقيقية. " +
    "المدرّس قادر على استعراض السجلات المحلية عند الطلب (من جهاز الطالب) لأغراض التقييم.";

  // بعد عرض النتيجة، يمكن إعادة توجيه داخليًا إلى صفحة شرح
  setTimeout(()=> {
    window.location.hash = '#result';
  }, 600);
});

// small UX handlers: clear errors on input
emailInput.addEventListener('input', ()=>{ emailErr.style.display='none'; emailInput.classList.remove('error'); });
pwInput.addEventListener('input', ()=>{ pwErr.style.display='none'; pwInput.classList.remove('error'); });

</script>
</body>
</html>
